<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Sam and Annabelle’s Wedding Gallery</title>
  <style>
    /* Reset & Font */
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: 'Segoe UI', sans-serif; text-align: center; padding: 2em 1em; transition: background 0.3s, color 0.3s; }

    /* Light / Dark mode */
    body { background: #f0f0f0; color: #333; }
    body.dark { background: #1e1e1e; color: #eee; }

    h1 { margin-bottom: 1em; }
    #dark-toggle { margin-bottom: 1.5em; padding: .6em 1.2em; font-size: 1em;
      background: #444; color: #fff; border: none; border-radius: 6px; cursor: pointer;
      transition: background 0.2s;
    }
    #dark-toggle:hover { background: #666; }

    /* Slideshow */
    #slideshow img {
      width: 90%; max-width: 900px; border: 6px solid #3498db;
      border-radius: 12px; margin-bottom: 2em; box-shadow: 0 10px 20px rgba(0,0,0,0.15);
      transition: transform 0.3s;
      cursor: pointer;
    }
    #slideshow img:hover { transform: scale(1.02); }

    /* Gallery grid */
    .gallery { display: flex; flex-wrap: wrap; justify-content: center; gap: 24px; padding: 0 1em; }
    .image-wrapper {
      display: flex; flex-direction: column; align-items: center;
      max-width: 180px; width: 100%;
    }
    .image-wrapper img {
      width: 100%; border: 3px solid #bdc3c7; border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1); cursor: pointer;
      transition: border-color 0.2s, transform 0.2s;
    }
    .image-wrapper img:hover { border-color: #3498db; transform: scale(1.05); }

    .save-button {
      margin-top: .5em; padding: .4em .8em; font-size: .9em;
      background: #3498db; color: #fff; border-radius: 6px;
      text-decoration: none; width: 100%; text-align: center;
      transition: background 0.2s;
    }
    .save-button:hover { background: #2980b9; }

    body.dark .save-button { background: #1abc9c; }
    body.dark .save-button:hover { background: #16a085; }

    @media(max-width: 768px) { .image-wrapper { max-width: 45%; } }
    @media(max-width: 480px) { .image-wrapper { max-width: 90%; } }
  </style>
</head>
<body>

  <h1>Sam and Annabelle’s Wedding Gallery</h1>
  <button id="dark-toggle">Toggle Dark Mode</button>

  <div id="slideshow">
    <img id="slide" src="" alt="Slideshow">
  </div>

  <div class="gallery" id="gallery"></div>

  <script>
    const gallery = document.getElementById('gallery');
    const slide = document.getElementById('slide');
    const toggle = document.getElementById('dark-toggle');
    const imageList = [];
    const max = 999;
    const exts = ['jpg','jpeg','png','webp'];
    let idx = 0;

    function pad(n) { return n.toString().padStart(3,'0'); }
    function check(src) {
      return new Promise(res => {
        const img = new Image();
        img.onload = () => res(src);
        img.onerror = () => res(null);
        img.src = src;
      });
    }

    async function loadImages(){
      for(let i=1;i<=max;i++){
        const name = `images/HotShots${pad(i)}`;
        for(const e of exts){
          const src = `${name}.${e}`;
          const ok = await check(src);
          if(ok){ imageList.push(ok); addGallery(ok); break; }
        }
      }
      if(imageList.length) { startSlide(); }
    }

    function addGallery(src){
      const div = document.createElement('div');
      div.className = 'image-wrapper';
      const img = document.createElement('img');
      img.src = src;
      img.onclick = () => { openFull(img); idx = imageList.indexOf(src); };
      const a = document.createElement('a');
      a.textContent = 'Save';
      a.href = src;
      a.download = '';
      a.className = 'save-button';
      div.append(img, a);
      gallery.append(div);
    }

    function startSlide(){
      slide.src = imageList[0];
      slide.onclick = () => openFull(slide);
      setInterval(() => {
        idx = (idx + 1) % imageList.length;
        slide.src = imageList[idx];
      }, 3000);
    }

    function openFull(img){
      if(img.requestFullscreen) img.requestFullscreen();
      else if(img.webkitRequestFullscreen) img.webkitRequestFullscreen();
      else if(img.msRequestFullscreen) img.msRequestFullscreen();
    }

    document.addEventListener('keydown', e => {
      if(document.fullscreenElement){
        if(e.key==='ArrowRight') idx = (idx+1)%imageList.length, updateSlide();
        if(e.key==='ArrowLeft') idx = (idx-1+imageList.length)%imageList.length, updateSlide();
      }
    });

    function updateSlide(){
      const fsImg = document.fullscreenElement;
      if(fsImg && fsImg.tagName==='IMG') fsImg.src = imageList[idx];
    }

    toggle.onclick = () => document.body.classList.toggle('dark');
    loadImages();
  </script>
</body>
</html>
